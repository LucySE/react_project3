(this["webpackJsonpreact-dog-parking-frontend"]=this["webpackJsonpreact-dog-parking-frontend"]||[]).push([[0],{36:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),o=n(28),s=n.n(o),i=(n(36),n(37),n(30)),l=n(7),u=n(8),h=n(10),j=n(9),d=n(12),p=n.n(d),b="http://localhost:3000",m=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleInput=function(t){switch(t.target.name){case"email":e.setState({email:t.target.value});break;case"password":e.setState({password:t.target.value})}},e.handleSubmit=function(t){var n={email:e.state.email,password:e.state.password};p.a.post("".concat(b,"/user_token"),{auth:n}).then((function(t){localStorage.setItem("jwt",t.data.jwt),p.a.defaults.headers.common.Authorization="Bearer "+t.data.jwt,e.props.setCurrentUser(),e.props.history.push("/my_profile")})).catch((function(e){console.warn(e)})),t.preventDefault()},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{children:"Login Form"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{onChange:this.handleInput,name:"email",type:"email",placeholder:"Enter Email"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{onChange:this.handleInput,name:"password",type:"password",placeholder:"Enter Password"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{children:"Login"})]})}}]),n}(c.a.Component),O=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:{name:"",email:""}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t="Bearer "+localStorage.getItem("jwt");p.a.get("".concat("http://localhost:3000","/users/current"),{headers:{Authorization:t}}).then((function(t){e.setState({currentUser:t.data})})).catch((function(e){return console.warn(e)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("h1",{children:["Hello ",this.state.currentUser.name]}),Object(a.jsxs)("h4",{children:["Your email is ",this.state.currentUser.email]})]})}}]),n}(c.a.Component),f=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={postal_code:"",radius:"20"},e.handleChange=function(t){e.setState({postal_code:t.target.value})},e.handleRadiusChange=function(t){e.setState({radius:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),console.log("search for:",e.state.postal_code),e.props.history.push("/search/".concat(e.state.postal_code,"/").concat(e.state.radius))},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("input",{type:"text",placeholder:"Enter postcode",onChange:this.handleChange}),Object(a.jsxs)("select",{onChange:this.handleRadiusChange,children:[Object(a.jsx)("option",{value:"1",children:"1 km"}),Object(a.jsx)("option",{value:"2",children:"2 km"}),Object(a.jsx)("option",{value:"3",children:"3 km"}),Object(a.jsx)("option",{value:"4",children:"4 km"}),Object(a.jsx)("option",{value:"5",children:"5 km"}),Object(a.jsx)("option",{value:"10",children:"10 km"}),Object(a.jsx)("option",{value:"20",selected:!0,children:"20 km"})]}),Object(a.jsx)("button",{children:"Search"})]})})}}]),n}(c.a.Component),g=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={dogparks:[]},e.fetchDogparks=function(){p.a.get("http://localhost:3000/search",{params:{postcode:e.props.match.params.postal_code,radius:e.props.match.params.radius}}).then((function(t){console.log("response:",t.data),e.setState({dogparks:t.data})})).catch(console.warn)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){console.log("mounted"),this.fetchDogparks()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.postal_code,a=t.radius;n===e.match.params.postal_code&&a===e.match.params.radius||this.fetchDogparks()}},{key:"render",value:function(){return Object(a.jsx)("ul",{children:this.state.dogparks.map((function(e){return Object(a.jsx)("li",{children:e.dogpark_name})}))})}}]),n}(c.a.Component),x=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("h2",{children:"Home Page"})})}}]),n}(c.a.Component),v=n(14),k=n(2),y="http://localhost:3000",w=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:void 0},e.setCurrentUser=function(){},e.handleLogout=function(){},e.setCurrentUser=function(){var t="Bearer "+localStorage.getItem("jwt");p.a.get("".concat(y,"/users/current"),{headers:{Authorization:t}}).then((function(t){e.setState({currentUser:t.data})})).catch((function(e){return console.warn(e)}))},e.handleLogout=function(){e.setState({currentUser:void 0}),localStorage.removeItem("jwt"),p.a.defaults.headers.common.Authorization=void 0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setCurrentUser()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"Home",children:[Object(a.jsx)("h1",{children:"Welcome to Dog Parking"}),Object(a.jsxs)(v.a,{children:[Object(a.jsxs)("nav",{children:[void 0!==this.state.currentUser?Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:["Welcome ",this.state.currentUser.name," | "]}),Object(a.jsx)("li",{children:Object(a.jsx)(v.b,{to:"/my_profile",children:"My Profile"})}),Object(a.jsx)("li",{children:Object(a.jsx)(v.b,{onClick:this.handleLogout,to:"/",children:"Logout"})})]}):Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:Object(a.jsx)(v.b,{to:"/login",children:"Login"})})}),Object(a.jsx)(v.b,{to:"/",children:"Home"})," |",Object(a.jsx)(v.b,{to:"/Search",children:"Search"}),"|",Object(a.jsx)("br",{}),Object(a.jsx)(k.a,{component:f})]}),Object(a.jsx)("hr",{}),Object(a.jsx)(k.a,{exact:!0,path:"/my_profile",component:O}),Object(a.jsx)(k.a,{exact:!0,path:"/login",render:function(t){return Object(a.jsx)(m,Object(i.a)({setCurrentUser:e.setCurrentUser},t))}}),Object(a.jsx)(k.a,{exact:!0,path:"/",component:x}),Object(a.jsx)(k.a,{exact:!0,path:"/search/:postal_code/:radius",component:g})]}),Object(a.jsxs)("footer",{children:[Object(a.jsx)("hr",{}),"\xa9 2021 Lucy Wirth"]})]})}}]),n}(c.a.Component),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root")),C()}},[[64,1,2]]]);
//# sourceMappingURL=main.d9995932.chunk.js.map