(this["webpackJsonpreact-dog-parking-frontend"]=this["webpackJsonpreact-dog-parking-frontend"]||[]).push([[0],{36:function(t,e,a){},63:function(t,e,a){},64:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a(1),r=a.n(o),c=a(29),s=a.n(c),i=(a(36),a(20)),l=a(4),d=a(5),h=a(7),u=a(6),p=a(12),j=a.n(p),b={url:{API_URL:"https://dog-parking-rails.herokuapp.com"}},g=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={email:"",password:""},t.handleInput=function(e){switch(e.target.name){case"email":t.setState({email:e.target.value});break;case"password":t.setState({password:e.target.value})}},t.handleSubmit=function(e){var a={email:t.state.email,password:t.state.password};j.a.post("".concat(b.url.API_URL,"/user_token"),{auth:a}).then((function(e){localStorage.setItem("jwt",e.data.jwt),t.props.setCurrentUser(),t.props.history.push("/my_profile")})).catch((function(t){console.warn(t)})),e.preventDefault()},t}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsx)("label",{children:"Login Form"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{onChange:this.handleInput,name:"email",type:"email",placeholder:"Enter Email"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{onChange:this.handleInput,name:"password",type:"password",placeholder:"Enter Password"}),Object(n.jsx)("br",{}),Object(n.jsx)("button",{children:"Login"})]})}}]),a}(r.a.Component),m=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return void 0===this.props.user?Object(n.jsx)("p",{children:"Loading.."}):Object(n.jsxs)("div",{children:[Object(n.jsxs)("h1",{children:["Hello ",this.props.user.name,"!"]}),Object(n.jsxs)("p",{children:["We love ",this.props.user.dog_name,"."]}),Object(n.jsxs)("p",{children:["Your email is ",this.props.user.email,"."]}),Object(n.jsxs)("h2",{children:[this.props.user.dog_name,"'s bookings"]}),Object(n.jsx)("ul",{children:this.props.user.bookings.map((function(t){return Object(n.jsxs)("li",{children:[new Date(t.booking_start_date).toLocaleString("en-AU"),Object(n.jsx)("br",{}),Object(n.jsx)("img",{src:t.photo,width:"400",height:"267"})]})}))})]})}}]),a}(r.a.Component),O=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={postal_code:"",radius:"20",booking_start_date:"",booking_end_date:""},t.handleChange=function(e){t.setState({postal_code:e.target.value})},t.handleRadiusChange=function(e){t.setState({radius:e.target.value})},t.handleStartDateChange=function(e){t.setState({booking_start_date:e.target.value})},t.handleEndDateChange=function(e){t.setState({booking_end_date:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),console.log("search for:",t.state.postal_code),t.props.history.push("/search/".concat(t.state.postal_code,"/").concat(t.state.radius,"/").concat(t.state.booking_start_date,"/").concat(t.state.booking_end_date))},t}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsx)("input",{type:"text",placeholder:"Enter postcode",onChange:this.handleChange}),Object(n.jsxs)("select",{onChange:this.handleRadiusChange,children:[Object(n.jsx)("option",{value:"1",children:"1 km"}),Object(n.jsx)("option",{value:"2",children:"2 km"}),Object(n.jsx)("option",{value:"3",children:"3 km"}),Object(n.jsx)("option",{value:"4",children:"4 km"}),Object(n.jsx)("option",{value:"5",children:"5 km"}),Object(n.jsx)("option",{value:"10",children:"10 km"}),Object(n.jsx)("option",{value:"20",selected:!0,children:"20 km"})]}),Object(n.jsx)("input",{type:"datetime-local",id:"start-time",name:"start-time",onChange:this.handleStartDateChange}),Object(n.jsx)("input",{type:"datetime-local",id:"finish-time",name:"finish-time",onChange:this.handleEndDateChange}),Object(n.jsx)("button",{children:"Search"})]})})}}]),a}(r.a.Component),x=a(13),k=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={dogparks:[]},t.fetchDogparks=function(){j.a.get(b.url.API_URL+"/search",{params:{postcode:t.props.match.params.postal_code,radius:t.props.match.params.radius,booking_start_date:t.props.match.params.booking_start_date,booking_end_date:t.props.match.params.booking_end_date}}).then((function(e){console.log("response:",e.data),t.setState({dogparks:e.data})})).catch(console.warn)},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("mounted"),this.fetchDogparks()}},{key:"componentDidUpdate",value:function(t){var e=this.props.match.params,a=e.postal_code,n=e.radius,o=e.booking_start_date,r=e.booking_end_date;a===t.match.params.postal_code&&n===t.match.params.radius&&o===t.match.params.booking_start_date&&r===t.match.params.booking_end_date||this.fetchDogparks()}},{key:"render",value:function(){var t=this;return Object(n.jsx)("ul",{children:this.state.dogparks.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsx)(x.b,{to:"/dogparks/".concat(e.id,"/book/").concat(t.props.match.params.booking_start_date,"/").concat(t.props.match.params.booking_end_date),children:e.dogpark_name})})}))})}}]),a}(r.a.Component),f=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this;j.a.post(b.url.API_URL+"/dogparks/".concat(this.props.match.params.id,"/book"),{booking_start_date:this.props.match.params.booking_start_date,booking_end_date:this.props.match.params.booking_end_date}).then((function(e){console.log("response:",e.data),t.setState({dogparks:e.data})})).catch(console.warn)}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h2",{children:"Dog Parking."}),Object(n.jsx)("p",{children:" Hello and welcome to dog parking, never leave home without your BFF again."})]})}}]),a}(r.a.Component),_=(a(63),function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h2",{children:"Dog Parking."}),Object(n.jsx)("p",{children:" Hello and welcome to dog parking, never leave home without your BFF again."})]})}}]),a}(r.a.Component)),v=a(2),y=function(t){Object(h.a)(a,t);var e=Object(u.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={currentUser:void 0},t.setCurrentUser=function(){var e="Bearer "+localStorage.getItem("jwt");console.log("token",e),j.a.defaults.headers.common.Authorization=e,j.a.get("".concat(b.url.API_URL,"/users/current")).then((function(e){console.log("user",e.data),t.setState({currentUser:e.data})})).catch((function(t){return console.warn(t)}))},t.handleLogout=function(){t.setState({currentUser:void 0}),localStorage.removeItem("jwt"),j.a.defaults.headers.common.Authorization=void 0},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setCurrentUser()}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"Home",children:["// ",Object(n.jsx)("h1",{children:Object(n.jsx)("img",{src:"https://res.cloudinary.com/do9y9tnbr/image/upload/v1612424564/dogpark_photos/dog_parking_logo_pbxj6m.png"})}),Object(n.jsxs)(x.a,{children:[Object(n.jsxs)("nav",{children:[void 0!==this.state.currentUser?Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["Welcome ",this.state.currentUser.name," | "]}),Object(n.jsx)("li",{children:Object(n.jsx)(x.b,{to:"/my_profile",children:"My Profile"})}),Object(n.jsx)("li",{children:Object(n.jsx)(x.b,{onClick:this.handleLogout,to:"/",children:"Logout"})})]}):Object(n.jsx)("ul",{children:Object(n.jsx)("li",{children:Object(n.jsx)(x.b,{to:"/login",children:"Login"})})}),Object(n.jsx)(x.b,{to:"/",children:"Home"})," |",Object(n.jsx)(x.b,{to:"/Search",children:"Search"}),"|",Object(n.jsx)("br",{}),Object(n.jsx)(v.a,{component:O})]}),Object(n.jsx)("hr",{}),Object(n.jsx)(v.a,{exact:!0,path:"/my_profile",render:function(e){return Object(n.jsx)(m,Object(i.a)({user:t.state.currentUser},e))}}),Object(n.jsx)(v.a,{exact:!0,path:"/login",render:function(e){return Object(n.jsx)(g,Object(i.a)({setCurrentUser:t.setCurrentUser},e))}}),Object(n.jsx)(v.a,{exact:!0,path:"/",component:_}),Object(n.jsx)(v.a,{exact:!0,path:"/search/:postal_code/:radius/:booking_start_date/:booking_end_date",component:k}),Object(n.jsx)(v.a,{exact:!0,path:"/dogparks/:id/book/:booking_start_date/:booking_end_date",component:f})]}),Object(n.jsxs)("footer",{children:[Object(n.jsx)("hr",{}),"\xa9 2021 Lucy Wirth"]})]})}}]),a}(r.a.Component),C=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,65)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,c=e.getTTFB;a(t),n(t),o(t),r(t),c(t)}))};s.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),C()}},[[64,1,2]]]);
//# sourceMappingURL=main.c1a0a67d.chunk.js.map